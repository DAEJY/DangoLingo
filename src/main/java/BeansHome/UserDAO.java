// #################################################################################################
// UserDAO.java - 사용자 DAO 모듈
// #################################################################################################
// ═════════════════════════════════════════════════════════════════════════════════════════
// 외부모듈 영역
// ═════════════════════════════════════════════════════════════════════════════════════════
package BeansHome;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import util.DatabaseUtil;

// ═════════════════════════════════════════════════════════════════════════════════════════
// 사용자정의 클래스 영역
// ═════════════════════════════════════════════════════════════════════════════════════════
/***********************************************************************
 * UserDAO    : 사용자 DAO 클래스<br>
 * Inheritance : None
 ***********************************************************************/
public class UserDAO {
    // —————————————————————————————————————————————————————————————————————————————————————
    // 전역상수 관리 - 필수영역
    // —————————————————————————————————————————————————————————————————————————————————————
    
    // —————————————————————————————————————————————————————————————————————————————————————
    // 전역변수 관리 - 필수영역(정적변수)
    // —————————————————————————————————————————————————————————————————————————————————————
    
    // —————————————————————————————————————————————————————————————————————————————————————
    // 전역변수 관리 - 필수영역(인스턴스변수)
    // —————————————————————————————————————————————————————————————————————————————————————
    private Connection conn;
    private PreparedStatement pstmt;
    private ResultSet rs;
    
    // —————————————————————————————————————————————————————————————————————————————————————
    // 생성자 관리 - 필수영역(인스턴스함수)
    // —————————————————————————————————————————————————————————————————————————————————————
    /***********************************************************************
     * UserDAO()    : 생성자
     * @param void  : None
     ***********************************************************************/
    public UserDAO() {
        try {
            // -----------------------------------------------------------------------------
            // 초기화 작업 관리
            // -----------------------------------------------------------------------------
            conn = DatabaseUtil.getConnection();
            // -----------------------------------------------------------------------------
        } catch (Exception Ex) {
            Common.ExceptionMgr.DisplayException(Ex);    // 예외처리(콘솔)
        }
    }
    
    // —————————————————————————————————————————————————————————————————————————————————————
    // 전역함수 관리 - 필수영역(정적함수)
    // —————————————————————————————————————————————————————————————————————————————————————
    
    // —————————————————————————————————————————————————————————————————————————————————————
    // 전역함수 관리 - 필수영역(인스턴스함수)
    // —————————————————————————————————————————————————————————————————————————————————————
    /***********************************************************************
     * login()         : 사용자 로그인 처리
     * @param userDTO  : 사용자 DTO 객체
     * @return int     : 로그인 결과 코드
     ***********************************************************************/
    public int login(UserDTO userDTO) {
        String SQL = "SELECT password FROM USER WHERE user_id = ?";
        try {
            // -----------------------------------------------------------------------------
            // 로그인 처리
            // -----------------------------------------------------------------------------
            pstmt = conn.prepareStatement(SQL);
            pstmt.setInt(1, userDTO.getUserId());
            rs = pstmt.executeQuery();
            if(rs.next()) {
                if(rs.getString(1).equals(userDTO.getPassword())) {
                    return 1; // 로그인 성공
                } else {
                    return 0; // 비밀번호 불일치
                }
            }
            return -1; // 아이디 없음
            // -----------------------------------------------------------------------------
        } catch (Exception Ex) {
            Common.ExceptionMgr.DisplayException(Ex);    // 예외처리(콘솔)
        }
        return -2; // 데이터베이스 오류
    }
    
    // 기타 필요한 메소드들 추가...
    // —————————————————————————————————————————————————————————————————————————————————————
}
// #################################################################################################
// <END>
// ################################################################################################# 